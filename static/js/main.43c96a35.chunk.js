(this.webpackJsonphotelms_clone=this.webpackJsonphotelms_clone||[]).push([[0],{103:function(e,t,n){e.exports={Modal:"SettingsMenuItem_Modal__1Ib8k",Overlay:"SettingsMenuItem_Overlay__2EU91"}},162:function(e,t,n){},163:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"borderWidth",(function(){return d})),n.d(r,"border",(function(){return u})),n.d(r,"borderMix",(function(){return j})),n.d(r,"displayFlexAlignCenter",(function(){return f})),n.d(r,"todayMarkerZIndex",(function(){return x})),n.d(r,"rentElementsZIndex",(function(){return v})),n.d(r,"btnHeaderZIndex",(function(){return g})),n.d(r,"weekendColor",(function(){return I})),n.d(r,"btnColor",(function(){return y})),n.d(r,"menuItemColor",(function(){return T})),n.d(r,"secondaryColor",(function(){return w})),n.d(r,"MainBgColor",(function(){return k})),n.d(r,"selectionColor",(function(){return S})),n.d(r,"rentElementColor",(function(){return R})),n.d(r,"gridColumnsWidth",(function(){return _})),n.d(r,"gridAutoRowsHeight",(function(){return F})),n.d(r,"gridTemplateFirstColumnWidth",(function(){return D})),n.d(r,"time",(function(){return N})),n.d(r,"tariffs",(function(){return C})),n.d(r,"maxAdditionalPersons",(function(){return A})),n.d(r,"priceAdditionalPerson",(function(){return E})),n.d(r,"currentCurrency",(function(){return M}));var a=n(1),i=n.n(a),c=n(56),s=n.n(c),o=(n(162),n(163),n(5)),l=n(6),d=1,u="".concat(d,"px solid black");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1px",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return"".concat(e," ").concat(t," ").concat(n)}var b,p,m,O,h,f="display: flex; align-items: center",x=500,v=450,g=505,I="lightblue",y="#0277bd",T="#9feaab",w="lightseagreen",k="#d5d5d57f",S="#e2c50a",R="#00c0e7",_=50,F=40,D="250px",N={hours:12,minutes:0,seconds:0,milliseconds:0},C={standard_2:1e3,standard_3:1500,standard_4:2e3,standard_5:2500,comfortable_2:2e3,comfortable_3:2500,comfortable_4:3e3,comfortable_5:3500,lux_2:5e3,lux_3:6e3,lux_4:7e3,lux_5:8e3},A=6,E=500,M="\u0440\u0443\u0431",L=n(57),P=l.a.legend(b||(b=Object(o.a)(["\n  padding: .2em;\n  border: 1px solid green;\n  border-left: #43b25a 5px solid;\n  border-right: #43b25a 5px solid;\n"]))),V=l.a.fieldset(p||(p=Object(o.a)(["\n  margin-bottom: 10px;\n"]))),z=l.a.span(m||(m=Object(o.a)(["\n  color: red;\n  text-align: center;\n  font-weight: bold;\n  padding: 5px;\n"]))),U=Object(l.a)(L.b)(O||(O=Object(o.a)(["\n  text-decoration: none;\n  color: ",";\n  font-size: ",";\n  font-weight: bold;\n  &:active {\n    color: white;\n  }\n"])),(function(e){return e.color||"black"}),(function(e){return e.size||"inherit"})),W=n(0),B=l.a.footer(h||(h=Object(o.a)(["\n  grid-area: footer;\n  border: ",";\n  background: ",";\n  ",";\n  justify-content: center;\n"])),u,w,f);function H(e){return Object(W.jsx)(B,{children:Object(W.jsx)(U,{to:"/doc",size:"24px",children:"Documentation"})})}var G=n(25),q=n(2),Y=n(323),K=n(145),X=n(312),Z="SHIFT_LEFT",J="SHIFT_RIGHT",$="SHIFT_NOW",Q="SHIFT_FROM",ee="DAYS_IN_TABLE",te=Object(Y.a)(new Date,N),ne=Object(K.a)(te,29),re={daysInTable:29,interval:{start:te,end:ne}};var ae,ie,ce,se,oe=function(e){var t=e.className,n=e.children;return Object(W.jsx)("span",{className:"material-icons "+t,children:n})},le=Object(l.a)(oe)(ae||(ae=Object(o.a)(["\n  font-size: ","px;\n"])),(function(e){return e.size})),de=l.a.div(ie||(ie=Object(o.a)(["\n  ",";\n  justify-content: flex-start;\n  border: "," ;\n  border-radius: 2px;\n  background-color: ",";\n  box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 2px 5px rgba(0,0,0,0.22);\n  padding: 8px 0;\n  margin: 0 2px;\n\n  :hover {\n    background-color: #87ee9d;\n    cursor: pointer;\n  }\n\n  :active {\n    box-shadow: inset 2px 2px 5px rgba(154, 147, 140, 0.5), 1px 1px 5px rgba(255, 255, 255, 1);\n  }\n"])),f,j(void 0,void 0,"#7693d5"),T),ue=Object(l.a)(le)(ce||(ce=Object(o.a)(["\nmargin: 0 5px;\n"]))),je=l.a.span(se||(se=Object(o.a)(["\nmargin-right: 5px;\n"])));function be(e){var t=e.openModal,n=e.iconName,r=e.menuItemTitle;return Object(W.jsxs)(de,{onClick:t,children:[Object(W.jsx)(ue,{children:n}),r&&Object(W.jsx)(je,{children:r})]})}var pe,me=n(9),Oe=l.a.button(pe||(pe=Object(o.a)(["\n  font-size: ",";\n  background-color: ",";\n  border-radius: 3px;\n  min-height: 30px;\n  min-width: ",";\n  display: ",";\n  align-items: ",";\n  z-index: ",";\n  color: white;\n  opacity: ",";\n"])),(function(e){return e.size||"1.2em"}),(function(e){return e.background||y}),F,(function(e){return e.isFlex&&"flex"}),(function(e){return e.isFlex&&"center"}),(function(e){return e.isFlex&&g}),(function(e){return e.disabled?.3:1}));function he(e){var t=e.onClick,n=e.size,r=e.isFlex,a=e.iconName,i=e.children,c=e.type,s=e.background,o=e.isDisable;return Object(W.jsxs)(Oe,{onClick:t,size:n,isFlex:r,type:c,background:s,disabled:o,children:[a&&Object(W.jsx)(oe,{children:a}),i&&Object(W.jsx)("span",{children:i})]})}var fe,xe=Object(a.createContext)(null),ve=l.a.div(fe||(fe=Object(o.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  margin: 5px;\n"])));function ge(e){var t=e.notSave,n=Object(a.useContext)(xe);return Object(W.jsxs)(ve,{children:[!t&&Object(W.jsx)(he,{type:"submit",size:"0.8em",children:"Save"}),Object(W.jsx)(he,{type:"button",onClick:n,size:"0.8em",children:"Close"})]})}var Ie,ye=function(e){var t=e.daysInTable,n=e.changeDaysInTable;return Object(W.jsx)(me.d,{initialValues:{daysInTable:t},onSubmit:function(e){n(e.daysInTable)},children:function(e){var t=e.setFieldValue;return Object(W.jsxs)(me.c,{children:[Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Days in grid"})}),Object(W.jsx)(me.b,{name:"daysInTable",type:"number",min:29,max:366,title:"\u043c\u0438\u043d: ".concat(29,"; \u043c\u0430\u043a\u0441: ").concat(366)}),Object(W.jsx)(he,{type:"button",size:"0.8em",onClick:function(){return t("daysInTable",29)},children:"Reset"})]}),Object(W.jsx)(ge,{})]})}})},Te=n(20),we=n(102),ke=n.n(we),Se=n(103),Re=n.n(Se);function _e(e){return function(t){var n=Object(a.useState)(t.isOpenModal||!1),r=Object(Te.a)(n,2),i=r[0],c=r[1],s=function(){c(!1),t.hasOwnProperty("setIsOpenModal")&&t.setIsOpenModal(!1)};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(e,Object(q.a)({openModal:function(){return c(!0)}},t)),Object(W.jsx)(ke.a,{isOpen:i,contentLabel:"settings",className:Re.a.Modal,overlayClassName:Re.a.Overlay,onRequestClose:s,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!0,children:Object(W.jsx)(xe.Provider,{value:s,children:t.children})})]})}}ke.a.setAppElement("#root");var Fe,De,Ne=l.a.div(Ie||(Ie=Object(o.a)(["\n  display: inline-block;\n  width: 2em;\n  height: 2em;\n  background-color: ",";\n  border: ",";\n  vertical-align: middle;\n"])),(function(e){return e.background}),u),Ce=function(){return Object(W.jsx)(me.d,{initialValues:r,children:Object(W.jsxs)(me.c,{children:[Object(W.jsx)("h3",{children:"One fine day, the settings can still be changed through this form, but now they can be found in: 'src/settings/settings.js'"}),Object.keys(r).map((function(e){return"function"!==typeof r[e]&&Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)("label",{htmlFor:e,children:e}),Object(W.jsx)(me.b,{name:e,type:"text",readOnly:!0}),e.includes("Color")&&Object(W.jsx)(Ne,{background:r[e]}),Object(W.jsx)("br",{})]},e)})),Object(W.jsx)(ge,{notSave:!0})]})})},Ae=n(11),Ee=n(12),Me=n(47),Le=n(17),Pe=n(18),Ve=n(85),ze=n.n(Ve),Ue=function(e){Object(Le.a)(n,e);var t=Object(Pe.a)(n);function n(e){var r;return Object(Ae.a)(this,n),(r=t.call(this,e)).updateCharts=r.updateCharts.bind(Object(Me.a)(r)),r.state={optionsMixedChart:{chart:{id:"basic-bar",toolbar:{show:!1}},plotOptions:{bar:{columnWidth:"50%"}},stroke:{width:[4,0,0]},xaxis:{categories:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},markers:{size:6,strokeWidth:3,fillOpacity:0,strokeOpacity:0,hover:{size:8}},yaxis:{tickAmount:5,min:0,max:100}},seriesMixedChart:[{name:"series-1",type:"line",data:[30,40,25,50,49,21,70,51]},{name:"series-2",type:"column",data:[23,12,54,61,32,56,81,19]},{name:"series-3",type:"column",data:[62,12,45,55,76,41,23,43]}],optionsRadial:{plotOptions:{radialBar:{startAngle:-135,endAngle:225,hollow:{margin:0,size:"70%",background:"#fff",image:void 0,imageOffsetX:0,imageOffsetY:0,position:"front",dropShadow:{enabled:!0,top:3,left:0,blur:4,opacity:.24}},track:{background:"#fff",strokeWidth:"67%",margin:0,dropShadow:{enabled:!0,top:-3,left:0,blur:4,opacity:.35}},dataLabels:{showOn:"always",name:{offsetY:-20,show:!0,color:"#888",fontSize:"13px"},value:{formatter:function(e){return e},color:"#111",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:["#ABE5A1"],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},labels:["Percent"]},seriesRadial:[76],optionsBar:{chart:{stacked:!0,stackType:"100%",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{dropShadow:{enabled:!0}},stroke:{width:0},xaxis:{categories:["Fav Color"],labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1}},fill:{opacity:1,type:"gradient",gradient:{shade:"dark",type:"vertical",shadeIntensity:.35,gradientToColors:void 0,inverseColors:!1,opacityFrom:.85,opacityTo:.85,stops:[90,0,100]}},legend:{position:"bottom",horizontalAlign:"right"}},seriesBar:[{name:"blue",data:[32]},{name:"green",data:[41]},{name:"yellow",data:[12]},{name:"red",data:[65]}]},r}return Object(Ee.a)(n,[{key:"updateCharts",value:function(){var e=[],t=[];this.state.seriesMixedChart.forEach((function(t){var n=t.data.map((function(){return Math.floor(61*Math.random())+30}));e.push({data:n,type:t.type})})),this.state.seriesBar.forEach((function(e){var n=e.data.map((function(){return Math.floor(151*Math.random())+30}));t.push({data:n,name:e.name})})),this.setState({seriesMixedChart:e,seriesBar:t,seriesRadial:[Math.floor(41*Math.random())+50]})}},{key:"render",value:function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h1",{style:{color:"#d90af1",textAlign:"center"},children:"Your big and powerful reports on everything!"}),Object(W.jsxs)("div",{className:"app",children:[Object(W.jsxs)("div",{className:"row",children:[Object(W.jsx)("div",{className:"col mixed-chart",children:Object(W.jsx)(ze.a,{options:this.state.optionsMixedChart,series:this.state.seriesMixedChart,type:"line",width:"500"})}),Object(W.jsx)("div",{className:"col radial-chart",children:Object(W.jsx)(ze.a,{options:this.state.optionsRadial,series:this.state.seriesRadial,type:"radialBar",width:"280"})})]}),Object(W.jsxs)("div",{className:"row",children:[Object(W.jsx)("div",{className:"col percentage-chart",children:Object(W.jsx)(ze.a,{options:this.state.optionsBar,height:140,series:this.state.seriesBar,type:"bar",width:500})}),Object(W.jsx)("p",{className:"col",children:Object(W.jsx)("button",{onClick:this.updateCharts,children:"Update!"})})]})]}),Object(W.jsx)(ge,{closeHandler:this.props.closeModal,notSave:!0})]})}}]),n}(a.Component),We="hotelms_clone/auth/SET_USER_DATA",Be=1,He="example@mail.com",Ge="user",qe="user",Ye={userId:null,email:null,login:null,isAuth:!1},Ke=function(e,t,n,r){return{type:We,payload:{userId:e,email:t,login:n,isAuth:r}}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:return Object(q.a)(Object(q.a)({},e),t.payload);default:return e}},Ze=l.a.header(Fe||(Fe=Object(o.a)(["\n  grid-area: header;\n  border: ",";\n  background: ",";\n  ",";\n  justify-content: space-between;\n"])),u,w,f),Je=l.a.nav(De||(De=Object(o.a)(["\n  ",";\n  justify-content: flex-start;\n"])),f),$e=_e(be);var Qe=function(e){return e.table.daysInTable},et=function(e){return e.auth.isAuth},tt=function(e){return e.auth.login};var nt,rt,at=Object(G.b)((function(e){return{daysInTable:Qe(e),isAuth:et(e),user:tt(e)}}),{changeDaysInTable:function(e){return{type:ee,days:e}},logout:function(){return function(e){e(Ke(null,null,null,!1))}}})((function(e){var t=e.daysInTable,n=e.changeDaysInTable,r=e.isAuth,a=e.logout,i=e.user;return Object(W.jsxs)(Ze,{children:[Object(W.jsxs)(Je,{children:[Object(W.jsx)(U,{to:"/",children:Object(W.jsx)(be,{iconName:"hotel"})}),r&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e,{iconName:"grid_on",menuItemTitle:"Grid",children:Object(W.jsx)(ye,{daysInTable:t,changeDaysInTable:n})}),Object(W.jsx)($e,{iconName:"settings",menuItemTitle:"Settings",children:Object(W.jsx)(Ce,{})}),Object(W.jsx)($e,{iconName:"format_list_bulleted",menuItemTitle:"Reports",children:Object(W.jsx)(Ue,{})})]})]}),Object(W.jsx)("div",{children:r?Object(W.jsx)("div",{onClick:a,children:Object(W.jsx)(be,{iconName:"logout",menuItemTitle:i})}):Object(W.jsx)(U,{to:"/login",children:Object(W.jsx)(be,{iconName:"login"})})})]})})),it=n(15),ct=n(49),st=l.a.div(nt||(nt=Object(o.a)(["\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background-color: crimson;\n  top: -30%;\n  right: 5%;\n  z-index: ",";\n"])),x),ot=l.a.div(rt||(rt=Object(o.a)(["\n  position: absolute;\n  height: 75vh;\n  border-left: 2px solid crimson;\n  top: 0;\n  right: 19%;\n  z-index: ",";\n"])),x);function lt(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(st,{}),Object(W.jsx)(ot,{})]})}var dt,ut,jt=n(38),bt=n(14),pt=n(105),mt=n(51),Ot=n(313),ht=n(314),ft=n(315),xt=n(316),vt=n(317),gt=n(148),It=n(324),yt=l.a.div(dt||(dt=Object(o.a)(["\n  grid-column: span ",";\n  border: ",";\n  ",";\n  justify-content: ",";\n  padding: 0 5px;\n"])),(function(e){return e.daysInCurrentMonth}),u,f,(function(e){return e.daysInCurrentMonth>3?"space-between":e.position})),Tt=l.a.strong(ut||(ut=Object(o.a)(["\n  margin: auto 45px;\n"])));function wt(e){var t=e.daysInCurrentMonth,n=e.position,r=e.leftBtn,a=e.monthName,i=e.yearOfDate,c=e.rightBtn;return Object(W.jsxs)(yt,{daysInCurrentMonth:t,position:n,children:[r," ",t>3&&Object(W.jsxs)(Tt,{children:[a," ",i]})," ",c]})}var kt=It.a,St=function(e){return Object(pt.a)(e,"dd",{locale:kt})},Rt=function(e){return Object(pt.a)(e,"eeeeee",{locale:kt})},_t=function(e){return Object(pt.a)(e,"LLLL",{locale:kt})},Ft=function(e){return Object(pt.a)(e,"dd-MM-y",{locale:kt})},Dt=function(e){return Object(pt.a)(e,"HH:mm",{locale:kt})},Nt=function(e,t){return Object(mt.a)(e)<Object(mt.a)(t)},Ct=function(e){return Object(Ot.a)(e.end,e.start)},At=function(e,t){var n=t.split(":"),r=Object(Te.a)(n,2),a=r[0],i=r[1];return Object(Y.a)(e,{hours:a,minutes:i})};function Et(e){return Nt(e.end,e.start)?{start:e.end,end:e.start}:e}function Mt(e,t,n,r){return!!e.start&&(Object(vt.a)(t,e)&&n===r)}function Lt(e,t,n,r){var a=e.viewRentIntervals[t.apartmentId][t.index][n];return a=r(a,1),(e=Object(q.a)({},e)).viewRentIntervals=Object(q.a)({},e.viewRentIntervals),e.viewRentIntervals[t.apartmentId]=Object(bt.a)(e.viewRentIntervals[t.apartmentId]),e.viewRentIntervals[t.apartmentId][t.index]=Object(q.a)(Object(q.a)({},e.viewRentIntervals[t.apartmentId][t.index]),{},Object(jt.a)({},n,a)),e}function Pt(e,t,n,r,a){var i,c,s,o,l,d;return"start"===a?e[n]&&Nt(null===(i=t[n])||void 0===i||null===(c=i.rentInfo[r])||void 0===c?void 0:c.rentInterval.start,null===(s=e[n][r])||void 0===s?void 0:s.start):e[n]&&Nt(null===(o=e[n][r])||void 0===o?void 0:o.end,null===(l=t[n])||void 0===l||null===(d=l.rentInfo[r])||void 0===d?void 0:d.rentInterval.end)}function Vt(e,t){return e.reduce((function(e,n){var r=function(e,t){var n,r,a=null;return Object(gt.a)(e.start,t.end)?{start:e.start,end:e.start}:Object(gt.a)(e.end,t.start)?{start:e.end,end:e.end}:(Object(vt.a)(e.end,t)&&(Object(gt.a)(e.start,t.start)||Nt(e.start,t.start))&&(a=Object(q.a)(Object(q.a)({},e),{},{start:t.start})),Object(vt.a)(e.start,t)&&(Object(gt.a)(e.end,t.end)||Nt(t.end,e.end))&&(a=Object(q.a)(Object(q.a)({},e),{},{end:t.end})),r=t,(n=e).start<r.start&&n.end>r.end&&(a=Object(q.a)({},t)),a||e)}(n.rentInterval,t);return e[n.apartmentId]=[].concat(Object(bt.a)(e[n.apartmentId]||[]),[r]),e}),{})}function zt(e,t){return e.map((function(e){return e.rentInfo=t.filter((function(t){return t.apartmentId===e.id})),e}))}var Ut,Wt,Bt,Ht,Gt,qt,Yt,Kt=n(76),Xt=n.p+"static/media/rent_preloader.ec5860cc.svg",Zt=l.a.div(Ut||(Ut=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: url(",") repeat-x;\n  height: 100%;\n  width: 100%;\n  z-index: 460;\n"])),Xt),Jt=function(){return Object(W.jsx)(Zt,{})},$t=l.a.div.attrs((function(e){return{"data-tip":"","data-for":e.forTooltip}}))(Wt||(Wt=Object(o.a)(["\n  position: absolute;\n  top: 1px;\n  left: 50%;\n  border: ",";\n  background-color: ",";\n  width: ",";\n  min-width: ","px;\n  height: ","px;\n  z-index: ",";\n\n  :hover {\n    cursor: pointer;\n  }\n"])),j(void 0,void 0,"#0237bd"),R,(function(e){return t=e.cellDimensions,n=e.viewRentInterval,t.width*Ct(n)+2*Ct(n)*d+"px";var t,n}),(function(e){return e.cellDimensions.width/2-1}),(function(e){return e.cellDimensions.height-2}),v),Qt=Object(l.a)(le)(Bt||(Bt=Object(o.a)(["\n  position: absolute;\n  top: 5px;\n  ",": -15px;\n  color: red;\n"])),(function(e){return e.position})),en=l.a.div(Ht||(Ht=Object(o.a)(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),tn=l.a.div(Gt||(Gt=Object(o.a)(["\n  position: absolute;\n  top: ",";\n  bottom: ",";\n  left: ",";\n  right: ",";\n  background-color: ",";\n  font-size: 0.7em;\n"])),(function(e){var t;return null!==(t=e.top)&&void 0!==t?t:""}),(function(e){var t;return null!==(t=e.bottom)&&void 0!==t?t:""}),(function(e){var t;return null!==(t=e.left)&&void 0!==t?t:""}),(function(e){var t;return null!==(t=e.right)&&void 0!==t?t:""}),(function(e){return e.background||"chocolate"})),nn=l.a.ul(qt||(qt=Object(o.a)(["\n  text-align: left;\n  list-style-type: none;\n"]))),rn=l.a.span(Yt||(Yt=Object(o.a)(["\n  color: #78e556;\n"])));n(31);var an,cn,sn,on,ln,dn=n(29),un=l.a.span(an||(an=Object(o.a)(["\n  border-radius: 3px;\n  border: 1px solid lightgrey;\n  border-left: #43b25a 5px solid;\n  background-color: white;\n  font-size: 1.1em;\n  margin: 1em;\n  text-align: center;\n  padding: 0.2em 0.5em;\n"]))),jn=l.a.h2(cn||(cn=Object(o.a)(["\n  text-align: center;\n  margin: 10px 0;\n"])));function bn(e){var t=e.rentInfo,n=e.index,r=e.apartmentsType,i=e.apartmentId,c=e.tariffs,s=e.numberOfPersons,o=e.createUpdateRentInfo,l=e.deleteRentInfo,d=Object(a.useContext)(xe),u=t.id,j=void 0===u?null:u,b=t.rentInterval,p=t.personInfo,m=(p=void 0===p?{}:p).firstName,O=void 0===m?"Anonymous":m,h=p.lastName,f=void 0===h?"":h,x=p.email,v=void 0===x?"":x,g=p.phone,I=void 0===g?"":g,y=t.additionalPersons,T=void 0===y?0:y,w=t.persons,k=void 0===w?1:w,S=t.tariff,R=void 0===S?"":S,_=t.percentageDiscount,F=void 0===_?0:_,D=t.moneyDiscount,N=void 0===D?0:D,C=t.price,E=void 0===C?0:C,L=t.comment,U=void 0===L?"":L,B=c[R]||c["".concat(r,"_").concat(s)];return Object(W.jsx)(me.d,{initialValues:{firstName:O,lastName:f,email:v,phone:I,additionalPersons:T,percentageDiscount:F,moneyDiscount:N,persons:k,comment:U,price:E,checkInTime:Dt(b.start),checkOutTime:Dt(b.end),tariff:B,checkIn:Ft(b.start),nights:Ct(b),checkOut:Ft(b.end),closeOnSave:!0},validationSchema:dn.a({firstName:dn.b().max(15,"Must be 15 characters or less").required("Name Required"),lastName:dn.b().max(20,"Must be 20 characters or less\u0432").required("Surname Required"),email:dn.b().email("Invalid email address").required("E-mail Required"),phone:dn.b().matches(/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/,"Invalid phone number"),price:dn.b().test("","The amount must be positive",(function(e){return parseFloat(e)>=0}))}),onSubmit:function(e){var t,a={rentInterval:{start:At(b.start,e.checkInTime).getTime(),end:At(b.end,e.checkOutTime).getTime()},personInfo:{firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone},additionalPersons:e.additionalPersons,persons:e.persons,tariff:(t=c,Object.keys(t).reduce((function(e,n){return e[t[n]]=n,e}),{}))[e.tariff],percentageDiscount:e.percentageDiscount,moneyDiscount:e.moneyDiscount,price:e.price,comment:e.comment,apartmentId:Number(i),id:j};o(a.id?"update":"create",r,n,i,a),e.closeOnSave&&d()},children:Object(W.jsxs)(me.c,{children:[Object(W.jsxs)(jn,{children:["Order creation form",Object(W.jsx)("span",{"data-tip":!0,"data-for":"deleteMessage",style:{float:"right"},children:Object(W.jsx)(he,{iconName:"delete",background:"red",type:"button",onClick:function(){l(r,n,i,j),d()}})}),Object(W.jsx)(Kt.a,{place:"bottom",type:"error",effect:"float",id:"deleteMessage",children:Object(W.jsx)("em",{children:Object(W.jsx)("strong",{children:"Immediate removal!!!"})})})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Guest"})}),Object(W.jsx)("label",{htmlFor:"firstName",children:"Name"}),Object(W.jsx)(me.b,{name:"firstName",type:"text",autoFocus:!0}),Object(W.jsx)("label",{htmlFor:"lastName",children:"Surname"}),Object(W.jsx)(me.b,{name:"lastName",type:"text"}),Object(W.jsx)(me.a,{component:z,name:"firstName"}),Object(W.jsx)(me.a,{component:z,name:"lastName"}),Object(W.jsx)("br",{}),Object(W.jsx)("label",{htmlFor:"email",children:"E-mail"}),Object(W.jsx)(me.b,{name:"email",type:"email"}),Object(W.jsx)("label",{htmlFor:"phone",children:"Phone number"}),Object(W.jsx)(me.b,{name:"phone",type:"text"}),Object(W.jsx)(me.a,{component:z,name:"email"}),Object(W.jsx)(me.a,{component:z,name:"phone"})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Check-in(out)"})}),Object(W.jsx)("label",{htmlFor:"checkIn",children:"Check-in"}),Object(W.jsx)(me.b,{name:"checkIn",type:"text",readOnly:!0}),Object(W.jsx)("label",{htmlFor:"checkInTime"}),Object(W.jsx)(me.b,{name:"checkInTime",type:"time"}),Object(W.jsx)("label",{htmlFor:"nights",children:"Nights"}),Object(W.jsx)(me.b,{name:"nights",type:"text",size:"4",readOnly:!0}),Object(W.jsx)("label",{htmlFor:"checkOut",children:"Check-out"}),Object(W.jsx)(me.b,{name:"checkOut",type:"text",readOnly:!0}),Object(W.jsx)("label",{htmlFor:"checkOutTime"}),Object(W.jsx)(me.b,{name:"checkOutTime",type:"time"})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Additional persons"})}),Object(W.jsx)("label",{htmlFor:"persons",title:"\u043e\u0442 1 \u0434\u043e ".concat(s),children:Object(W.jsx)(le,{children:"group"})}),Object(W.jsx)(me.b,{name:"persons",type:"number",min:1,max:s,title:"\u043e\u0442 1 \u0434\u043e ".concat(s)}),Object(W.jsx)("label",{htmlFor:"additionalPersons",children:Object(W.jsx)(le,{children:"group_add"})}),Object(W.jsx)(me.b,{name:"additionalPersons",as:"select",children:Object(bt.a)(Array(A).keys()).map((function(e){return Object(W.jsx)("option",{value:e,children:e},e)}))}),Object(W.jsx)(pn,{fieldName:"additionalPersons",isAdditionalPersons:!0})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Rates and discounts"})}),Object(W.jsx)("label",{htmlFor:"tariff",children:"Tariff"}),Object(W.jsx)(me.b,{name:"tariff",as:"select",children:Object.keys(c).map((function(e){return Object(W.jsx)("option",{value:c[e],children:e},e)}))}),Object(W.jsx)(pn,{fieldName:"tariff"}),Object(W.jsx)("label",{htmlFor:"percentageDiscount",children:"Discount %"}),Object(W.jsx)(me.b,{name:"percentageDiscount",type:"number",min:0,max:100}),Object(W.jsx)("label",{htmlFor:"moneyDiscount",children:"Discount"}),Object(W.jsx)(me.b,{name:"moneyDiscount",type:"number",min:0}),Object(W.jsx)("span",{children:M})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Total amount"})}),Object(W.jsx)("label",{htmlFor:"price",children:"Total amount"}),Object(W.jsx)(mn,{name:"price",type:"text",rentInterval:b,readOnly:!0})]}),Object(W.jsxs)(V,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Comment"})}),Object(W.jsx)(me.b,{name:"comment",as:"textarea",rows:5,cols:70})]}),Object(W.jsx)("label",{htmlFor:"closeOnSave",children:"Close on save: "}),Object(W.jsx)(me.b,{name:"closeOnSave",type:"checkbox",style:{verticalAlign:"middle",marginLeft:"10px"}}),Object(W.jsx)(ge,{})]})})}function pn(e){var t=e.fieldName,n=e.isAdditionalPersons,r=Object(me.f)().values[t],a=r*E||!1;return Object(W.jsxs)(W.Fragment,{children:[n&&a&&Object(W.jsxs)(W.Fragment,{children:["=",Object(W.jsxs)(un,{children:[a," ",M]})]}),!n&&Object(W.jsxs)(W.Fragment,{children:["=",Object(W.jsxs)(un,{children:[r," ",M]})]})]})}function mn(e){var t=e.rentInterval,n=e.name,r=Object(ct.a)(e,["rentInterval","name"]),i=Object(me.f)(),c=i.values,s=c.tariff,o=c.percentageDiscount,l=c.moneyDiscount,d=c.additionalPersons,u=i.setFieldValue,j=Object(me.e)(n),b=Object(Te.a)(j,2),p=b[0],m=b[1];return Object(a.useEffect)((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n=Number(n)||0;var r=e*(t=Number(t)||0)+n*E;return Number(r.toFixed(2))}(Ct(t),s,d),r=Number((e*o/100).toFixed(2))||l;u(n,"".concat(e-r," ").concat(M)),u("moneyDiscount",r)}),[s,o,d,l,t,n]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("input",Object(q.a)(Object(q.a)({},r),p)),!!m.touched&&!!m.error&&Object(W.jsx)(z,{children:m.error})]})}var On=l.a.div.attrs((function(e){return{"data-date":e.date,"data-apartment_id":e.apartmentId,"data-apartments_type":e.apartmentsType}}))(sn||(sn=Object(o.a)(["\n  position: relative;\n  text-align: center;\n  user-select: none;\n  border: ",";\n  background-color: ",";\n  cursor: ",";\n"])),(function(e){return e.isSelect?"none":u}),(function(e){return e.isSelect?S:e.isWeekend?I:"inherit"}),(function(e){return e.isSelect?"cell":null})),hn=l.a.span(on||(on=Object(o.a)(["\n  color: midnightblue;\n  font-weight: ",";\n"])),(function(e){return e.topStringFontWeight||"bold"})),fn=l.a.span(ln||(ln=Object(o.a)(["\n  color: gray;\n  font-weight: ",";\n"])),(function(e){return e.bottomStringFontWeight||"bold"})),xn=_e((function(e){var t=e.openModal,n=e.cellDimensions,r=e.viewRentInterval,a=e.isLeftArrow,i=e.isRightArrow,c=e.rentInfo,s=e.isUpdating,o=c.id,l=c.rentInterval,d=c.personInfo,u=(d=void 0===d?{}:d).firstName,j=void 0===u?"\u0410\u043d\u043e\u043d\u0438\u043c":u,b=d.lastName,p=void 0===b?"":b,m=d.email,O=void 0===m?"":m,h=d.phone,f=void 0===h?"":h,x=c.additionalPersons,v=void 0===x?null:x,g=c.tariff,I=void 0===g?"":g,y=c.percentageDiscount,T=void 0===y?0:y,w=c.moneyDiscount,k=void 0===w?0:w,S=c.price,R=void 0===S?0:S,_=c.comment,F=void 0===_?"":_;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)($t,{onClick:t,cellDimensions:n,viewRentInterval:r,forTooltip:"".concat(o),children:[s.id===o&&s.preloader&&Object(W.jsx)(Jt,{}),a&&Object(W.jsx)(Qt,{position:"left",children:"arrow_left"}),i&&Object(W.jsx)(Qt,{position:"right",children:"arrow_right"}),Object(W.jsxs)(en,{children:[p," ",j]}),Object(W.jsx)(tn,{top:0,right:0,children:R}),Object(W.jsx)(tn,{bottom:0,left:0,background:"#2c79dc",children:Dt(l.start)}),Object(W.jsx)(tn,{bottom:0,right:0,background:"#2c79dc",children:Dt(l.end)})]}),Object(W.jsx)(Kt.a,{place:"bottom",type:"dark",effect:"float",id:"".concat(o),children:Object(W.jsxs)(nn,{children:[Object(W.jsxs)("li",{children:["Order \u2116",Object(W.jsx)(rn,{children:o})]}),Object(W.jsxs)("li",{children:["Check-in: ",Object(W.jsx)(rn,{children:Ft(l.start)})," at ",Object(W.jsx)(rn,{children:Dt(l.start)})]}),Object(W.jsxs)("li",{children:["Check-out: ",Object(W.jsx)(rn,{children:Ft(l.end)})," at ",Object(W.jsx)(rn,{children:Dt(l.end)})]}),Object(W.jsxs)("li",{children:["Nights: ",Object(W.jsx)(rn,{children:Ct(l)})]}),p&&j&&Object(W.jsxs)("li",{children:["Guest: ",Object(W.jsxs)(rn,{children:[p," ",j]})]}),O&&Object(W.jsxs)("li",{children:["Email: ",Object(W.jsx)(rn,{children:O})]}),f&&Object(W.jsxs)("li",{children:["Phone.: ",Object(W.jsx)(rn,{children:f})]}),!!v&&Object(W.jsxs)("li",{children:["Additional persons.: ",Object(W.jsx)(rn,{children:v})]}),I&&Object(W.jsxs)("li",{children:["Tariff: ",Object(W.jsx)(rn,{children:I})]}),!(!T&&!k)&&Object(W.jsxs)("li",{children:["Discount: ",Object(W.jsxs)(rn,{children:[T,"% (",k," ",M,".)"]})]}),!!R&&Object(W.jsxs)("li",{children:["Total amount: ",Object(W.jsxs)(rn,{children:[R,"."]})]}),Object(W.jsxs)("li",{children:["Comment: ",Object(W.jsx)(rn,{children:F?"Yes":"No"})]})]})})]})}));function vn(e){var t=e.isWeekend,n=e.date,r=e.apartmentId,a=e.isSelect,i=e.apartmentsType,c=e.isToday,s=e.isRent,o=e.isLeftArrow,l=e.isRightArrow,d=e.rentInfo,u=e.index,j=e.tariffs,b=e.numberOfPersons,p=e.isOpenModal,m=e.setIsOpenModal,O=e.createUpdateRentInfo,h=e.deleteRentInfo,f=e.isUpdating,x=e.topString?Object(W.jsx)(hn,{children:e.topString}):null,v=e.bottomString?Object(W.jsx)(fn,{children:e.bottomString}):null;return Object(W.jsxs)(On,{isWeekend:t,date:n,apartmentId:r,isSelect:a,apartmentsType:i,children:[c&&Object(W.jsx)(lt,{}),s&&Object(W.jsx)(xn,{cellDimensions:e.cellDimensions,viewRentInterval:s,isLeftArrow:o,isRightArrow:l,rentInfo:d,isOpenModal:p,setIsOpenModal:m,isUpdating:f,children:Object(W.jsx)(bn,{rentInfo:d,index:u,apartmentsType:i,tariffs:j,apartmentId:r,numberOfPersons:b,createUpdateRentInfo:O,deleteRentInfo:h})}),x,Object(W.jsx)("br",{}),v]})}var gn=n(318),In=n(319),yn=n(320);function Tn(e){var t,n=e.rowTitle,r=e.rowCells;return n&&(t="object"===typeof n?n:Object(W.jsx)("div",{children:n})),Object(W.jsxs)(W.Fragment,{children:[t," ",r]})}var wn,kn,Sn,Rn=n(152),_n=n.n(Rn),Fn=n(153),Dn=(n(290),n(156));function Nn(e,t,n){var r=Object(Dn.a)(e,t,new Date,{locale:n});if(Fn.DateUtils.isDate(r))return r}function Cn(e,t,n){return Object(pt.a)(e,t,{locale:n})}function An(e){var t=Object(a.useState)({selectedDay:e.fromDay,isEmpty:!e.fromDay}),n=Object(Te.a)(t,2),r=n[0],i=n[1];var c="dd-MM-yyyy";return Object(W.jsx)(_n.a,{dayPickerProps:{todayButton:"Today"},formatDate:Cn,format:c,parseDate:Nn,placeholder:"".concat(Object(pt.a)(e.fromDay,c)),selectedDay:e.fromDay,value:e.fromDay,keepFocus:!1,inputProps:{name:e.name,type:e.type},onDayChange:function(e,t,n){var r=n.getInput();i({selectedDay:e,isEmpty:!r.value.trim()})},onDayPickerHide:function(){return function(e,t){var n=e.selectedDay,r=e.isEmpty,a=t.shiftFrom;n&&!r&&a(n)}(r,e)}})}var En,Mn=l.a.div(wn||(wn=Object(o.a)(["\n  grid-row: 1/3;\n  border: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n"])),u),Ln=l.a.div(kn||(kn=Object(o.a)(["\n  display: flex;\n  justify-content: space-around;\n"]))),Pn=l.a.div(Sn||(Sn=Object(o.a)(["\ntext-align: center;\n"])));function Vn(e){var t=e.shiftFrom,n=e.fromDay,r=e.onClick;return Object(W.jsxs)(Mn,{children:[Object(W.jsxs)(Ln,{children:[Object(W.jsx)(An,{shiftFrom:t,fromDay:n}),Object(W.jsx)(he,{iconName:"schedule",onClick:r,isFlex:!0})]}),Object(W.jsx)(Pn,{children:"\u041d\u043e\u043c\u0435\u0440\u0430"})]})}function zn(e){var t=e.interval,n=e.days,r=Object(ct.a)(e,["interval","days"]),a=r.shiftDateIntervalLeft,i=r.shiftDateIntervalRight,c=r.shiftDateIntervalNow,s=r.shiftDateIntervalFrom,o=Object(gn.a)(t),l=n.map((function(e){return Object(W.jsx)(vn,{topString:St(e),bottomString:Rt(e),isWeekend:Object(In.a)(e),isToday:Object(yn.a)(e)},e)})),d=o.map(function(e,t,n,r){return function(a){var i,c=Object(ht.a)(e.start,Object(ft.a)(a))?e.start:Object(ft.a)(a),s=Object(ht.a)(Object(xt.a)(a),e.end)?e.end:Object(xt.a)(a),o=Object(Ot.a)(s,c)+1,l=t[0],d=t[t.length-1],u="",j=a===l?(u="flex-start",Object(W.jsx)(he,{iconName:"keyboard_arrow_left",onClick:n,isFlex:!0})):null,b=a===d?(u="flex-end",Object(W.jsx)(he,{iconName:"keyboard_arrow_right",onClick:r,isFlex:!0})):null;return Object(W.jsx)(wt,{daysInCurrentMonth:o,leftBtn:j,rightBtn:b,monthName:_t(a),yearOfDate:(i=a,Object(pt.a)(i,"y",{locale:kt})),position:u},a)}}(t,o,a,i));return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Vn,{onClick:c,shiftFrom:s,fromDay:t.start}),Object(W.jsx)(Tn,{rowCells:d}),Object(W.jsx)(Tn,{rowCells:l})]})}var Un=l.a.div(En||(En=Object(o.a)(["\n  ",";\n  border: ",";\n  justify-content: ",";\n  background-color: ",";\n  font-weight: ",";\n  padding-left: ",";\n"])),f,u,(function(e){var t=e.position;return t||"center"}),(function(e){return e.isWeekend?I:"inherit"}),(function(e){var t=e.weight;return t||600}),(function(e){return e.position?"1em":null}));function Wn(e){var t=e.apartments,n=e.apartmentId,r=e.freeApartments,a=Object(ct.a)(e,["apartments","apartmentId","freeApartments"]);return Object(W.jsx)(W.Fragment,{children:Object.keys(t).map((function(e){return Object(W.jsxs)(i.a.Fragment,{children:[Object(W.jsx)(Tn,{rowCells:(c=e,r[c].map((function(e){return Object(W.jsxs)(Un,{isWeekend:Object(In.a)(e.day),weight:800,children:[" ",e.freeApartments," "]},e.day)}))),rowTitle:Object(W.jsx)(Un,{children:e})}),Object(W.jsx)(Bn,Object(q.a)({apartmentsByType:t[e],apartmentsType:e,apartmentIdForSelect:n},a))]},e);var c}))})}function Bn(e){var t=e.days,n=e.apartmentsByType,r=e.apartmentsType,c=e.apartmentIdForSelect,s=e.selectInterval,o=e.cellDimensions,l=e.viewRentIntervals,d=e.leftSideShiftLeftViewRentInterval,u=e.leftSideShiftRightViewRentInterval,j=e.rightSideShiftLeftViewRentInterval,b=e.rightSideShiftRightViewRentInterval,p=e.tariffs,m=e.isOpenModal,O=e.setIsOpenModal,h=e.interval,f=e.createUpdateRentInfo,x=e.deleteRentInfo,v=e.isUpdating;function g(e,t,r){return r.map((function(r){var a,i=function(e,t){for(var n=0;n<(null===e||void 0===e?void 0:e.length);n++)if(Object(gt.a)(t,e[n].start)&&!Object(gt.a)(e[n].start,e[n].end))return[e[n],n];return!1}(l[e],r)||[!1,!1],d=Object(Te.a)(i,2),u=d[0],j=d[1];return Object(W.jsx)(vn,{bottomString:St(r),isWeekend:Object(In.a)(r),date:r,isRent:u,apartmentId:e,apartmentsType:t,cellDimensions:o,rentInfo:null===(a=n[e])||void 0===a?void 0:a.rentInfo[j],index:j,isSelect:Mt(s,r,c,e),isLeftArrow:Pt(l,n,e,j,"start"),isRightArrow:Pt(l,n,e,j,"end"),tariffs:p,numberOfPersons:n[e].numberOfPersons,isOpenModal:m,setIsOpenModal:O,createUpdateRentInfo:f,deleteRentInfo:x,isUpdating:v},r)}))}return Object(a.useEffect)((function(){Object.keys(l).forEach((function(e){if(e in n)for(var r=0;r<(null===(a=l[e])||void 0===a?void 0:a.length);r++){var a,i=l[e][r],c=i.start,s=i.end;if(Object(vt.a)(c,h)||Object(vt.a)(s,h)){var o=n[e].rentInfo[r].rentInterval,p=t[0],m=t[t.length-1];!Object(gt.a)(c,s)&&Nt(c,p)&&d(e,r),!Object(gt.a)(m,s)&&Nt(m,s)&&j(e,r),!Object(gt.a)(c,null===o||void 0===o?void 0:o.start)&&Nt(p,c)&&u(e,r),!Object(gt.a)(s,null===o||void 0===o?void 0:o.end)&&Nt(s,m)&&b(e,r)}}}))}),[t,l,n]),Object(W.jsx)(W.Fragment,{children:Object.keys(n).sort((function(e,t){return n[e].numberOfPersons-n[t].numberOfPersons})).map((function(e){return Object(W.jsxs)(i.a.Fragment,{children:[Object(W.jsxs)(Un,{position:"flex-start",weight:500,children:[n[e].apartmentsNumber," (",n[e].numberOfPersons,")"]},n[e].apartmentsNumber),g(e,r,t)]},e)}))})}var Hn=n(43),Gn=n.n(Hn),qn=n(86),Yn=n(321),Kn=n(154).create({baseURL:"https://my-json-server.typicode.com/Alex-Kharin/hotelms-clone-db",headers:{"Content-Type":"application/json"}}),Xn=function(){return Kn.get("apartments").then((function(e){return e.data}))},Zn=function(){return Kn.get("rentInfo").then((function(e){return e.data}))},Jn=function(e){return Kn.patch("rentInfo/"+e.id,e)},$n=function(e){return Kn.post("rentInfo",e)},Qn=function(e){return Kn.delete("rentInfo/"+e)},er="APARTMENTS",tr="VIEW_RENT_INTERVALS",nr="TOGGLE_IS_FETCHING",rr="TOGGLE_IS_UPDATING",ar="IS_SELECT",ir="START_SELECTION_INTERVAL",cr="END_SELECTION_INTERVAL",sr="CLEAR_SELECTED_DAYS",or="APARTMENT_ID",lr="RENT_INTERVAL",dr="LEFT_SIDE_SHIFT_LEFT_VIEW_RENT_INTERVAL",ur="LEFT_SIDE_SHIFT_RIGHT_VIEW_RENT_INTERVAL",jr="RIGHT_SIDE_SHIFT_LEFT_VIEW_RENT_INTERVAL",br="RIGHT_SIDE_SHIFT_RIGHT_VIEW_RENT_INTERVAL",pr="RENT_INFO",mr="OPEN_MODAL",Or="CANCEL_RENT",hr={apartments:{},tariffs:C,isFetching:!0,isUpdating:{preloader:!1,id:null},isSelect:!1,isOpenModal:!1,selectInterval:{start:null,end:null},apartmentId:null,cellDimensions:{width:_-2*d,height:F-2*d},viewRentIntervals:{}};var fr=function(e){return{type:er,apartments:e}},xr=function(e){return{type:tr,viewRentIntervals:e}},vr=function(e){return{type:nr,isFetching:e}},gr=function(e,t){return{type:rr,preloader:e,id:t}},Ir=function(e){return{type:mr,isOpenModal:e}},yr=function(e,t,n,r){return{type:pr,apartmentsType:e,index:t,apartmentId:n,rentInfo:r}},Tr=function(e,t,n){return{type:Or,apartmentsType:e,index:t,apartmentId:n}};var wr,kr=n(78),Sr=n(322),Rr=function(e){return e.tableApartments.apartments},_r=function(e){return e.tableApartments.viewRentIntervals},Fr=function(e){return e.tableApartments.cellDimensions},Dr=function(e){return e.tableApartments.tariffs},Nr=function(e){return e.tableApartments.isOpenModal},Cr=function(e){return e.tableApartments.isFetching},Ar=function(e){return e.tableApartments.isUpdating},Er=function(e){return Object(Sr.a)(e.table.interval).map((function(e){return Object(Y.a)(e,N)}))},Mr=Object(kr.a)(Rr,Er,(function(e,t){return Object.keys(e).reduce((function(n,r){for(var a=function(a){var i=Object.keys(e[r]).length,c=t[a];Object.values(e[r]).forEach((function(e){e.rentInfo.some((function(t){return Object(Yn.a)({start:c,end:c},t.rentInterval,{inclusive:!1})||Object(gt.a)(c,t.rentInterval.end)&&e.rentInfo.some((function(e){return Object(gt.a)(c,e.rentInterval.start)}))}))&&i--})),n[r]=[].concat(Object(bt.a)(n[r]||[]),[{freeApartments:i,day:c}])},i=0;i<t.length;i++)a(i);return n}),{})})),Lr=n.p+"static/media/preloader.ea356991.svg",Pr=l.a.div(wr||(wr=Object(o.a)(["\n  grid-column: 1/-1;\n  ",";\n  justify-content: center;\n"])),f),Vr=function(){return Object(W.jsx)(Pr,{children:Object(W.jsx)("img",{src:Lr,alt:"preload..."})})};var zr,Ur={leftSideShiftLeftViewRentInterval:function(e,t){return{type:dr,apartmentId:e,index:t}},leftSideShiftRightViewRentInterval:function(e,t){return{type:ur,apartmentId:e,index:t}},rightSideShiftLeftViewRentInterval:function(e,t){return{type:jr,apartmentId:e,index:t}},rightSideShiftRightViewRentInterval:function(e,t){return{type:br,apartmentId:e,index:t}},setIsOpenModal:Ir,requestApartments:function(){return function(){var e=Object(qn.a)(Gn.a.mark((function e(t,n){var r,a,i,c,s;return Gn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(vr(!0)),e.next=3,Xn();case 3:return r=e.sent,e.next=6,Zn();case 6:(a=e.sent).forEach((function(e){e.rentInterval.start=new Date(e.rentInterval.start),e.rentInterval.end=new Date(e.rentInterval.end),e.rentInterval=Et(e.rentInterval)})),i=zt(r,a),c=i.reduce((function(e,t){return e[t.apartmentsType]?e[t.apartmentsType][t.id]=Object(q.a)(Object(q.a)({},e[t.apartmentsType][t.id]),t):(e[t.apartmentsType]={},e[t.apartmentsType][t.id]=t),e}),{}),s=Vt(a,n().table.interval),t(fr(c)),t(xr(s)),t(vr(!1));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createUpdateRentInfo:function(e,t,n,r,a){return function(){var i=Object(qn.a)(Gn.a.mark((function i(c){var s;return Gn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,c(gr(!0,null===a||void 0===a?void 0:a.id)),"create"!==e){i.next=8;break}return i.next=5,$n(a);case 5:i.t0=i.sent,i.next=16;break;case 8:if("update"!==e){i.next=14;break}return i.next=11,Jn(a);case 11:i.t1=i.sent,i.next=15;break;case 14:i.t1=null;case 15:i.t0=i.t1;case 16:"OK"!==(s=i.t0).statusText&&"Created"!==s.statusText||c(yr(t,n,r,s.data)),i.next=23;break;case 20:i.prev=20,i.t2=i.catch(0),console.error(i.t2);case 23:return i.prev=23,c(gr(!1,null===a||void 0===a?void 0:a.id)),i.finish(23);case 26:case"end":return i.stop()}}),i,null,[[0,20,23,26]])})));return function(e){return i.apply(this,arguments)}}()},deleteRentInfo:function(e,t,n,r){return function(){var a=Object(qn.a)(Gn.a.mark((function a(i){return Gn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i(gr(!0,r)),a.next=4,Qn(r);case 4:"OK"===a.sent.statusText&&i(Tr(e,t,n)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:return a.prev=11,e&&t&&n&&!r&&i(Tr(e,t,n)),i(gr(!1,null)),a.finish(11);case 15:case"end":return a.stop()}}),a,null,[[0,8,11,15]])})));return function(e){return a.apply(this,arguments)}}()}},Wr=Object(G.b)((function(e,t){return{interval:t.interval,selectInterval:t.selectInterval,apartmentId:t.apartmentId,days:Er(e),apartments:Rr(e),cellDimensions:Fr(e),viewRentIntervals:_r(e),tariffs:Dr(e),isOpenModal:Nr(e),isFetching:Cr(e),isUpdating:Ar(e),freeApartments:Mr(e)}}),Ur)((function(e){var t=e.isFetching,n=e.requestApartments;return Object(a.useEffect)((function(){t&&n()}),[t]),Object(W.jsxs)(W.Fragment,{children:[t&&Object(W.jsx)(Vr,{}),!t&&Object(W.jsx)(Wn,Object(q.a)({},e))]})})),Br=l.a.div(zr||(zr=Object(o.a)(["\n  display: grid;\n  grid-template-columns: "," repeat(",", ","px);\n  grid-auto-rows: minmax(","px, auto);\n  margin: 10px 10px -9px 10px;\n"])),D,(function(e){return e.daysInTable}),_,F);var Hr=function(e){return e.table.interval},Gr=function(e){return e.table.daysInTable},qr=function(e){return e.tableApartments.isSelect},Yr=function(e){return e.tableApartments.apartmentId},Kr=Object(kr.a)((function(e){return e.tableApartments.selectInterval}),(function(e){return Et(e)}));var Xr,Zr={shiftDateIntervalLeft:function(){return{type:Z}},shiftDateIntervalRight:function(){return{type:J}},shiftDateIntervalFrom:function(e){return{type:Q,from:e}},shiftDateIntervalNow:function(){return{type:$}},setSelecting:function(e){return{type:ar,isSelect:e}},setStartSelection:function(e){return{type:ir,startSelection:e}},setEndSelection:function(e){return{type:cr,endSelection:e}},setApartmentId:function(e){return{type:or,apartmentId:e}},clearSelectedDays:function(){return{type:sr}},setRentInterval:function(e,t){return{type:lr,apartmentsType:e,rentInterval:t}},setIsOpenModal:Ir},Jr=Object(G.b)((function(e){return{interval:Hr(e),daysInTable:Gr(e),days:Er(e),isSelect:qr(e),selectInterval:Kr(e),apartmentId:Yr(e)}}),Zr)((function(e){var t=e.days,n=e.interval,r=e.setApartmentId,a=e.setSelecting,i=e.setStartSelection,c=e.selectInterval,s=e.setRentInterval,o=e.clearSelectedDays,l=e.isSelect,d=e.apartmentId,u=e.setEndSelection,j=e.daysInTable,b=e.setIsOpenModal;function p(e){var t=e.target.closest("div"),n=t.dataset.date;if(n){var l=new Date(n);"mousedown"===e.type?(r(t.dataset.apartment_id),a(!0),i(l)):"mouseup"===e.type&&(c.start&&c.end&&!Object(gt.a)(c.start,c.end)&&t.dataset.apartment_id===d&&(s(t.dataset.apartments_type,Et(c)),b(!0)),o(),a(!1))}}return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Br,{daysInTable:j+1,children:Object(W.jsx)(zn,Object(q.a)(Object(q.a)({},e),{},{interval:n,days:t}))}),Object(W.jsx)(Br,{daysInTable:j+1,onMouseDown:p,onMouseUp:p,onMouseOver:function(e){if(l&&e.target.dataset.apartment_id===d){var t=e.target.dataset.date;if(t){var n=new Date(t);u(n)}}},children:Object(W.jsx)(Wr,{selectInterval:c,apartmentId:d,interval:n})})]})})),$r=l.a.main(Xr||(Xr=Object(o.a)(["\n  grid-area: main;\n  border: ",";\n  background: ",";\n  overflow-x: auto;\n"])),u,k);var Qr,ea,ta,na=n.p+"static/media/img.b2708216.jpg",ra=l.a.div(Qr||(Qr=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 78%;\n  background-color: #d5d5d57f;\n  margin: 0 auto;\n  \n"])));var aa=l.a.div(ea||(ea=Object(o.a)(["\n  width: 30%;\n  margin: 0 auto;\n"]))),ia=Object(l.a)(V)(ta||(ta=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n"])));function ca(){var e=Object(me.f)().errors;return Object(W.jsx)(z,{children:null===e||void 0===e?void 0:e.api})}function sa(){var e=Object(me.f)(),t=e.errors,n=e.touched,r=e.isValid,a=t.api||!r||!n.login;return Object(W.jsx)(he,{type:"submit",isDisable:a,children:"Sign-in"})}var oa=Object(G.b)((function(e){return{isAuth:et(e)}}),{login:function(e,t){var n=e.login,r=e.password;return function(e){try{if(n!==Ge||r!==qe)throw new Error("Unable to login with the provided credentials.");e(Ke(Be,He,n,!0))}catch(a){console.error(a),t.setErrors({api:a.message})}}}})((function(e){var t=e.login;return Object(W.jsx)(aa,{children:Object(W.jsx)(me.d,{initialValues:{login:"",password:""},validationSchema:dn.a().shape({login:dn.b().min(2,"Too Short!").max(20,"Too Long!").required("Required"),password:dn.b().required("No password provided.")}),onSubmit:function(e,n){t(e,n)},children:Object(W.jsxs)(me.c,{children:[Object(W.jsxs)(ia,{children:[Object(W.jsx)(P,{children:Object(W.jsx)("strong",{children:"Auth"})}),Object(W.jsx)(me.b,{name:"login",type:"text",placeholder:"Login",autoFocus:!0}),Object(W.jsx)(me.a,{component:z,name:"login"}),Object(W.jsx)(me.b,{name:"password",type:"password",placeholder:"Password"}),Object(W.jsx)(me.a,{component:z,name:"password"}),Object(W.jsx)(ca,{}),Object(W.jsx)("br",{}),Object(W.jsx)(sa,{})]}),Object(W.jsxs)("p",{children:["Login: ",Object(W.jsx)("strong",{children:"user"})]}),Object(W.jsxs)("p",{children:["Password: ",Object(W.jsx)("strong",{children:"user"})]})]})})})})),la=[{path:"/doc",component:function(e){return Object(W.jsxs)(ra,{children:[Object(W.jsx)("header",{children:Object(W.jsx)("h1",{children:"Documentation"})}),Object(W.jsxs)("article",{children:[Object(W.jsx)("h2",{children:"Grid"}),Object(W.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore, molestiae?"}),Object(W.jsx)("img",{src:na,width:1024}),Object(W.jsx)("p",{children:Object(W.jsx)("b",{children:"More detail a little later. "})})]})]})},exact:!0}],da=[{path:"/",component:function(e){return Object(W.jsx)($r,{children:Object(W.jsx)(Jr,{})})},exact:!0}].concat(la),ua=[{path:"/login",component:oa,exact:!0}].concat(la);var ja=Object(G.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(e){var t=e.isAuth,n=t?da:ua,r=t?"/":"/login";return Object(W.jsxs)(it.d,{children:[n.map((function(e){return Object(W.jsx)(it.b,{component:e.component,path:e.path,exact:e.exact},e.path)})),Object(W.jsx)(it.a,{to:r})]})}));var ba=function(){return Object(W.jsx)("div",{className:"App",children:Object(W.jsxs)(L.a,{children:[Object(W.jsx)(at,{}),Object(W.jsx)(ja,{}),Object(W.jsx)(H,{})]})})},pa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,325)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},ma=n(59),Oa=n(155),ha=Object(ma.b)({table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:var n=Object(K.a)(e.interval.start,1),r=Object(K.a)(e.interval.end,1);return Object(q.a)(Object(q.a)({},e),{},{interval:{start:n,end:r}});case J:var a=Object(X.a)(e.interval.start,1),i=Object(X.a)(e.interval.end,1);return Object(q.a)(Object(q.a)({},e),{},{interval:{start:a,end:i}});case $:var c=Object(K.a)(te,e.daysInTable);return Object(q.a)(Object(q.a)({},e),{},{interval:{start:te,end:c}});case Q:var s=t.from,o=Object(K.a)(s,e.daysInTable);return Object(q.a)(Object(q.a)({},e),{},{interval:{start:s,end:o}});case ee:var l=Object(K.a)(e.interval.start,t.days);return Object(q.a)(Object(q.a)({},e),{},{daysInTable:t.days,interval:Object(q.a)(Object(q.a)({},e.interval),{},{end:l})});default:return e}},tableApartments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case er:return Object(q.a)(Object(q.a)({},e),{},{apartments:t.apartments});case tr:return Object(q.a)(Object(q.a)({},e),{},{viewRentIntervals:t.viewRentIntervals});case nr:return Object(q.a)(Object(q.a)({},e),{},{isFetching:t.isFetching});case rr:return Object(q.a)(Object(q.a)({},e),{},{isUpdating:{preloader:t.preloader,id:t.id}});case ar:return Object(q.a)(Object(q.a)({},e),{},{isSelect:t.isSelect});case ir:return Object(q.a)(Object(q.a)({},e),{},{selectInterval:{start:t.startSelection,end:t.startSelection}});case cr:return Object(q.a)(Object(q.a)({},e),{},{selectInterval:Object(q.a)(Object(q.a)({},e.selectInterval),{},{end:t.endSelection})});case or:return Object(q.a)(Object(q.a)({},e),{},{apartmentId:t.apartmentId});case sr:return Object(q.a)(Object(q.a)({},e),{},{selectInterval:{}});case lr:var n=e.apartments[t.apartmentsType][e.apartmentId].rentInfo;return n.some((function(e){return Object(Yn.a)(e.rentInterval,t.rentInterval)}))?e:Object(q.a)(Object(q.a)({},e),{},{apartments:Object(q.a)(Object(q.a)({},e.apartments),{},Object(jt.a)({},t.apartmentsType,Object(q.a)(Object(q.a)({},e.apartments[t.apartmentsType]),{},Object(jt.a)({},e.apartmentId,Object(q.a)(Object(q.a)({},e.apartments[t.apartmentsType][e.apartmentId]),{},{rentInfo:[].concat(Object(bt.a)(e.apartments[t.apartmentsType][e.apartmentId].rentInfo),[{rentInterval:t.rentInterval}])}))))),viewRentIntervals:Object(q.a)(Object(q.a)({},e.viewRentIntervals),{},Object(jt.a)({},e.apartmentId,[].concat(Object(bt.a)(e.viewRentIntervals[e.apartmentId]||[]),[t.rentInterval])))});case dr:return Lt(e,t,"start",K.a);case ur:return Lt(e,t,"start",X.a);case jr:return Lt(e,t,"end",X.a);case br:return Lt(e,t,"end",K.a);case pr:return(e=Object(q.a)({},e)).apartments=Object(q.a)({},e.apartments),e.apartments[t.apartmentsType]=Object(q.a)({},e.apartments[t.apartmentsType]),e.apartments[t.apartmentsType][t.apartmentId]=Object(q.a)({},e.apartments[t.apartmentsType][t.apartmentId]),e.apartments[t.apartmentsType][t.apartmentId].rentInfo=Object(bt.a)(e.apartments[t.apartmentsType][t.apartmentId].rentInfo),e.apartments[t.apartmentsType][t.apartmentId].rentInfo[t.index]=t.rentInfo,e;case mr:return Object(q.a)(Object(q.a)({},e),{},{isOpenModal:t.isOpenModal});case Or:return(e=Object(q.a)({},e)).apartments=Object(q.a)({},e.apartments),e.apartments[t.apartmentsType]=Object(q.a)({},e.apartments[t.apartmentsType]),e.apartments[t.apartmentsType][t.apartmentId]=Object(q.a)({},e.apartments[t.apartmentsType][t.apartmentId]),e.apartments[t.apartmentsType][t.apartmentId].rentInfo=e.apartments[t.apartmentsType][t.apartmentId].rentInfo.filter((function(e,n){return n!==t.index})),e.viewRentIntervals=Object(q.a)({},e.viewRentIntervals),e.viewRentIntervals[t.apartmentId]=e.viewRentIntervals[t.apartmentId].filter((function(e,n){return n!==t.index})),e;default:return e}},auth:Xe}),fa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ma.c,xa=Object(ma.d)(ha,fa(Object(ma.a)(Oa.a)));window.store=xa,s.a.render(Object(W.jsx)(i.a.StrictMode,{children:Object(W.jsx)(G.a,{store:xa,children:Object(W.jsx)(ba,{})})}),document.getElementById("root")),pa()}},[[309,1,2]]]);
//# sourceMappingURL=main.43c96a35.chunk.js.map